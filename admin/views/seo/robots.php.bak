<?php
/**
 * Robots.txt Editor View
 */

// Include admin header
require_once __DIR__ . '/../includes/header.php';
require_once __DIR__ . '/../../core/csrf.php';


<div class="admin-content">
    <h1>Robots.txt Management</h1>
    
    <?php if (isset($_GET['saved'])): ?>
        <div class="alert alert-success">
            Robots.txt rules saved successfully
        </div>
    <?php endif;  ?>
    
    <?php if (isset($error)): ?>
        <div class="alert alert-error">
            <?php echo htmlspecialchars($error);  ?>
        </div>
    <?php endif;  ?>
    
    <form method="post" class="robots-form">
        <?= csrf_field();  ?>
        <div class="rules-container">
            <?php foreach ($currentRules as $index => $rule): ?>
                <div class="rule-group">
                    <div class="form-group">
                        <label>User Agent</label>
                        <input type="text" name="rules[<?php echo $index; ?>][user_agent]" 
                               value="<?php echo htmlspecialchars($rule['User-agent'] ?? '*'); ?>">
                    </div>
                    
                    <div class="form-group">
                        <label>Disallow Paths (one per line)</label>
                        <textarea name="rules[<?php echo $index; ?>][disallow]"><?php 
                            echo isset($rule['Disallow']) ? htmlspecialchars(implode("\n", $rule['Disallow'])) : ''; 
                        ?></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Allow Paths (one per line)</label>
                        <textarea name="rules[<?php echo $index; ?>][allow]"><?php 
                            echo isset($rule['Allow']) ? htmlspecialchars(implode("\n", $rule['Allow'])) : ''; 
                        ?></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Crawl Delay</label>
                            <input type="number" name="rules[<?php echo $index; ?>][crawl_delay]" 
                                   value="<?php echo htmlspecialchars($rule['Crawl-delay'] ?? ''); ?>">
                        </div>
                        
                        <div class="form-group">
                            <label>Sitemap URL</label>
                            <input type="text" name="rules[<?php echo $index; ?>][sitemap]" 
                                   value="<?php echo htmlspecialchars($rule['Sitemap'] ?? ''); ?>">
                        </div>
                    </div>
                </div>
            <?php endforeach;  ?>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Rules</button>
            <a href="?" class="btn">Cancel</a>
        </div>
    </form>
</div>

<?php
// Include admin footer
require_once __DIR__ . '/../includes/footer.php';