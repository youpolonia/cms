<?php
/**
 * Theme Builder 3.0 - Bootstrap
 *
 * Initializes the Theme Builder module system for Jessie AI-CMS.
 * Divi-style Section→Row→Column→Module hierarchy support.
 *
 * @package ThemeBuilder
 * @version 3.0
 */

defined('TB_VERSION') or define('TB_VERSION', '3.0');

// Core Theme Builder files
require_once __DIR__ . '/database.php';
require_once __DIR__ . '/renderer.php';
require_once __DIR__ . '/modules/index.php';
require_once __DIR__ . '/modules/_base.php';

require_once __DIR__ . '/presets.php';
/**
 * Initialize Theme Builder
 *
 * Called during admin bootstrap to set up the Theme Builder system.
 * Registers default modules and prepares the rendering engine.
 *
 * @return void
 */
function tb_init(): void
{
    // Register built-in module types
    tb_register_builtin_modules();

    // Allow extensions to register custom modules
    if (function_exists('do_action')) {
        do_action('tb_init');
    }
}

/**
 * Register built-in module types
 *
 * @return void
 */
function tb_register_builtin_modules(): void
{
    // Text module
    tb_register_module('text', [
        'name' => 'Text',
        'icon' => 'text',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'text' => '',
            ],
            'design' => [
                'font_size' => '16px',
                'line_height' => '1.6',
                'text_color' => '#333333',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Image module
    tb_register_module('image', [
        'name' => 'Image',
        'icon' => 'image',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'src' => '',
                'alt' => '',
                'title' => '',
            ],
            'design' => [
                'width' => '100%',
                'height' => 'auto',
                'border_radius' => '0',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
                'lazy_load' => true,
            ],
        ],
    ]);

    // Button module
    tb_register_module('button', [
        'name' => 'Button',
        'icon' => 'button',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'text' => 'Click Here',
                'url' => '#',
                'target' => '_self',
            ],
            'design' => [
                'background_color' => '#0073e6',
                'text_color' => '#ffffff',
                'border_radius' => '4px',
                'padding' => '12px 24px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Heading module
    tb_register_module('heading', [
        'name' => 'Heading',
        'icon' => 'heading',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'text' => '',
                'level' => 'h2',
            ],
            'design' => [
                'font_size' => '32px',
                'font_weight' => '700',
                'text_color' => '#222222',
                'text_align' => 'left',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Divider module
    tb_register_module('divider', [
        'name' => 'Divider',
        'icon' => 'divider',
        'category' => 'layout',
        'defaults' => [
            'content' => [
                'show_divider' => true,
            ],
            'design' => [
                'color' => '#dddddd',
                'style' => 'solid',
                'weight' => '1px',
                'width' => '100%',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Spacer module
    tb_register_module('spacer', [
        'name' => 'Spacer',
        'icon' => 'spacer',
        'category' => 'layout',
        'defaults' => [
            'content' => [],
            'design' => [
                'height' => '40px',
                'height_tablet' => '30px',
                'height_mobile' => '20px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);
    // Video module
    tb_register_module('video', [
        'name' => 'Video',
        'icon' => 'video',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'url' => '',
                'autoplay' => false,
                'controls' => true,
            ],
            'design' => [
                'aspect_ratio' => '16:9',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Audio module - HTML5 audio player with custom styling
    tb_register_module('audio', [
        'name' => 'Audio',
        'icon' => 'audio',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'audio_url' => '',
                'title' => '',
                'artist' => '',
                'album' => '',
                'cover_image' => '',
            ],
            'design' => [
                'style' => 'default',
                'show_cover' => true,
                'cover_size' => '120px',
                'background_color' => '#1e1e2e',
                'text_color' => '#ffffff',
                'accent_color' => '#0073e6',
                'autoplay' => false,
                'loop' => false,
                'show_download' => false,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Code module
    tb_register_module('code', [
        'name' => 'Code',
        'icon' => 'code',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'code' => '',
                'language' => 'javascript',
            ],
            'design' => [
                'theme' => 'dark',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Quote module
    tb_register_module('quote', [
        'name' => 'Quote',
        'icon' => 'quote',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'text' => '',
                'author' => '',
                'source' => '',
            ],
            'design' => [
                'style' => 'default',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // List module
    tb_register_module('list', [
        'name' => 'List',
        'icon' => 'list',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'items' => [],
                'type' => 'unordered',
            ],
            'design' => [
                'icon' => 'bullet',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Icon module
    tb_register_module('icon', [
        'name' => 'Icon',
        'icon' => 'icon',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'icon' => 'star',
                'size' => '48px',
            ],
            'design' => [
                'color' => '#333333',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Map module
    tb_register_module('map', [
        'name' => 'Map',
        'icon' => 'map',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'address' => '',
                'lat' => 0,
                'lng' => 0,
                'zoom' => 14,
            ],
            'design' => [
                'height' => '300px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Accordion module
    tb_register_module('accordion', [
        'name' => 'Accordion',
        'icon' => 'accordion',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'items' => [
                    ['title' => 'Item 1', 'content' => ''],
                ],
            ],
            'design' => [
                'style' => 'default',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Toggle module - Single collapsible item (different from Accordion which has multiple items)
    tb_register_module('toggle', [
        'name' => 'Toggle',
        'icon' => 'toggle',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'title' => 'Click to expand',
                'content' => 'Hidden content goes here...',
                'open_by_default' => false,
            ],
            'design' => [
                'icon_position' => 'right',
                'icon_open' => '+',
                'icon_close' => '−',
                'title_background' => '#f8fafc',
                'title_color' => '#1e293b',
                'content_background' => '#ffffff',
                'border_color' => '#e2e8f0',
                'border_radius' => '8px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Tabs module
    tb_register_module('tabs', [
        'name' => 'Tabs',
        'icon' => 'tabs',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'tabs' => [
                    ['title' => 'Tab 1', 'content' => ''],
                ],
            ],
            'design' => [
                'style' => 'default',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Gallery module
    tb_register_module('gallery', [
        'name' => 'Gallery',
        'icon' => 'gallery',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'images' => [],
                'columns' => 3,
            ],
            'design' => [
                'gap' => '10px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Testimonial module
    tb_register_module('testimonial', [
        'name' => 'Testimonial',
        'icon' => 'testimonial',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'text' => '',
                'author' => '',
                'role' => '',
                'avatar' => '',
            ],
            'design' => [
                'style' => 'card',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // CTA module
    tb_register_module('cta', [
        'name' => 'Call to Action',
        'icon' => 'cta',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'title' => '',
                'subtitle' => '',
                'button_text' => 'Get Started',
                'button_url' => '#',
            ],
            'design' => [
                'style' => 'centered',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Pricing module
    tb_register_module('pricing', [
        'name' => 'Pricing',
        'icon' => 'pricing',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'title' => '',
                'price' => '',
                'period' => '/month',
                'features' => [],
                'button_text' => 'Choose',
                'button_url' => '#',
            ],
            'design' => [
                'highlighted' => false,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Blurb module - Icon/Image + Title + Text combination
    tb_register_module('blurb', [
        'name' => 'Blurb',
        'icon' => 'blurb',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'icon' => 'star',
                'use_image' => false,
                'image' => '',
                'title' => 'Your Title Here',
                'text' => 'Your description text goes here.',
                'url' => '',
            ],
            'design' => [
                'icon_size' => '64px',
                'icon_color' => '#0073e6',
                'title_font_size' => '24px',
                'text_font_size' => '16px',
                'alignment' => 'center',
                'layout' => 'top',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Hero module - Fullwidth header with background, title, subtitle, CTA buttons
    tb_register_module('hero', [
        'name' => 'Hero',
        'icon' => 'hero',
        'category' => 'layout',
        'defaults' => [
            'content' => [
                'title' => 'Welcome to Our Site',
                'subtitle' => 'We build amazing digital experiences',
                'primary_button_text' => 'Get Started',
                'primary_button_url' => '#',
                'secondary_button_text' => 'Learn More',
                'secondary_button_url' => '#',
                'show_secondary' => true,
            ],
            'design' => [
                'background_type' => 'color',
                'background_color' => '#1e1e2e',
                'background_image' => '',
                'background_video' => '',
                'gradient_start' => '#667eea',
                'gradient_end' => '#764ba2',
                'overlay_color' => 'rgba(0,0,0,0.5)',
                'min_height' => '600px',
                'text_color' => '#ffffff',
                'alignment' => 'center',
                'content_width' => '800px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
                'fullwidth' => true,
            ],
        ],
    ]);

    // Slider module - Content slider/carousel for testimonials, images, or custom slides
    tb_register_module('slider', [
        'name' => 'Slider',
        'icon' => 'slider',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'slides' => [
                    [
                        'title' => 'Slide 1',
                        'text' => 'Description for slide 1',
                        'image' => '',
                        'button_text' => 'Learn More',
                        'button_url' => '#',
                    ],
                ],
            ],
            'design' => [
                'autoplay' => true,
                'autoplay_speed' => 5000,
                'show_arrows' => true,
                'show_dots' => true,
                'animation' => 'slide',
                'min_height' => '400px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Blog module - Displays latest blog posts/articles from CMS database
    tb_register_module('blog', [
        'name' => 'Blog',
        'icon' => 'blog',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'posts_count' => 6,
                'category' => '',
                'show_excerpt' => true,
                'excerpt_length' => 150,
                'show_date' => true,
                'show_author' => true,
                'show_image' => true,
            ],
            'design' => [
                'columns' => 3,
                'gap' => '30px',
                'card_style' => 'card',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Team module - Team member cards with photo, name, role, bio, social links
    tb_register_module('team', [
        'name' => 'Team Member',
        'icon' => 'team',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'name' => 'John Doe',
                'role' => 'CEO & Founder',
                'bio' => 'A short biography about this team member.',
                'image' => '',
                'social' => [
                    ['platform' => 'linkedin', 'url' => ''],
                    ['platform' => 'twitter', 'url' => ''],
                ],
            ],
            'design' => [
                'style' => 'card',
                'image_size' => '200px',
                'alignment' => 'center',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Countdown module - Countdown timer to a specific date/time
    tb_register_module('countdown', [
        'name' => 'Countdown',
        'icon' => 'countdown',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'target_date' => '',
                'title' => 'Event Starts In',
                'expired_message' => 'Event has started!',
            ],
            'design' => [
                'style' => 'boxes',
                'show_days' => true,
                'show_hours' => true,
                'show_minutes' => true,
                'show_seconds' => true,
                'number_size' => '48px',
                'label_size' => '14px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Counter module - Animated counting number statistics
    tb_register_module('counter', [
        'name' => 'Counter',
        'icon' => 'counter',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'number' => 100,
                'prefix' => '',
                'suffix' => '+',
                'title' => 'Happy Clients',
            ],
            'design' => [
                'number_size' => '64px',
                'number_color' => '#0073e6',
                'title_size' => '18px',
                'animation_duration' => 2000,
                'alignment' => 'center',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Form module - Contact form with configurable fields
    tb_register_module('form', [
        'name' => 'Contact Form',
        'icon' => 'form',
        'category' => 'forms',
        'defaults' => [
            'content' => [
                'title' => 'Get In Touch',
                'fields' => [
                    ['type' => 'text', 'label' => 'Name', 'placeholder' => 'Your name', 'required' => true],
                    ['type' => 'email', 'label' => 'Email', 'placeholder' => 'your@email.com', 'required' => true],
                    ['type' => 'textarea', 'label' => 'Message', 'placeholder' => 'Your message...', 'required' => true],
                ],
                'submit_text' => 'Send Message',
                'success_message' => 'Thank you! Your message has been sent.',
                'recipient_email' => '',
            ],
            'design' => [
                'style' => 'stacked',
                'button_style' => 'primary',
                'button_full_width' => false,
                'label_position' => 'top',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Social module - Social media profile links/icons
    tb_register_module('social', [
        'name' => 'Social Follow',
        'icon' => 'social',
        'category' => 'social',
        'defaults' => [
            'content' => [
                'networks' => [
                    ['platform' => 'facebook', 'url' => ''],
                    ['platform' => 'twitter', 'url' => ''],
                    ['platform' => 'instagram', 'url' => ''],
                    ['platform' => 'linkedin', 'url' => ''],
                ],
            ],
            'design' => [
                'style' => 'icons',
                'icon_size' => '24px',
                'icon_color' => '#333333',
                'hover_color' => '#0073e6',
                'gap' => '16px',
                'alignment' => 'center',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Menu module - Navigation menu with CMS menus or manual links
    tb_register_module('menu', [
        'name' => 'Menu',
        'icon' => 'menu',
        'category' => 'layout',
        'defaults' => [
            'content' => [
                'menu_source' => 'custom', // custom, cms_menu
                'cms_menu_id' => null,
                'items' => [
                    ['label' => 'Home', 'url' => '/'],
                    ['label' => 'About', 'url' => '/about'],
                    ['label' => 'Contact', 'url' => '/contact'],
                ],
            ],
            'design' => [
                'orientation' => 'horizontal', // horizontal, vertical
                'alignment' => 'center',
                'gap' => '24px',
                'font_size' => '16px',
                'text_color' => '#333333',
                'hover_color' => '#0073e6',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Sidebar module - Dynamic widget area from CMS widget system
    tb_register_module('sidebar', [
        'name' => 'Sidebar',
        'icon' => 'sidebar',
        'category' => 'layout',
        'defaults' => [
            'content' => [
                'widget_area_id' => null,
                'show_title' => true,
                'title' => 'Sidebar',
            ],
            'design' => [
                'background_color' => '#ffffff',
                'padding' => '20px',
                'border' => '1px solid #e2e8f0',
                'width' => '100%',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Bar Counters module - Multiple animated progress bars with labels and percentages
    tb_register_module('bar_counters', [
        'name' => 'Bar Counters',
        'icon' => 'bar_counters',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'bars' => [
                    ['label' => 'HTML/CSS', 'percent' => 90, 'color' => '#0073e6'],
                    ['label' => 'JavaScript', 'percent' => 85, 'color' => '#f59e0b'],
                    ['label' => 'PHP', 'percent' => 80, 'color' => '#8b5cf6'],
                ],
            ],
            'design' => [
                'bar_height' => '20px',
                'bar_background' => '#e2e8f0',
                'bar_border_radius' => '10px',
                'show_percent' => true,
                'percent_position' => 'inside', // inside, outside, above
                'label_color' => '#1e293b',
                'label_size' => '14px',
                'gap' => '16px',
                'animate' => true,
                'animation_duration' => '1.5s',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Circle Counter module - Animated circular progress indicator with percentage in center
    tb_register_module('circle_counter', [
        'name' => 'Circle Counter',
        'icon' => 'circle_counter',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'percent' => 75,
                'title' => 'Completed',
                'number_prefix' => '',
                'number_suffix' => '%',
            ],
            'design' => [
                'circle_size' => '200px',
                'bar_width' => '10px',
                'bar_color' => '#0073e6',
                'track_color' => '#e2e8f0',
                'number_size' => '48px',
                'number_color' => '#1e293b',
                'title_size' => '16px',
                'title_color' => '#64748b',
                'animate' => true,
                'animation_duration' => '1.5s',
                'line_cap' => 'round', // round, square
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Login module - User login form with username/email, password, remember me
    tb_register_module('login', [
        'name' => 'Login Form',
        'icon' => 'login',
        'category' => 'forms',
        'defaults' => [
            'content' => [
                'title' => 'Login',
                'username_label' => 'Username or Email',
                'username_placeholder' => 'Enter your username or email',
                'password_label' => 'Password',
                'password_placeholder' => 'Enter your password',
                'submit_text' => 'Log In',
                'show_remember' => true,
                'remember_label' => 'Remember Me',
                'show_forgot' => true,
                'forgot_text' => 'Forgot Password?',
                'forgot_url' => '/forgot-password',
                'redirect_url' => '/dashboard',
                'show_register' => true,
                'register_text' => 'Create an Account',
                'register_url' => '/register',
            ],
            'design' => [
                'style' => 'default', // default, card, minimal, split
                'background_color' => '#ffffff',
                'input_background' => '#f8fafc',
                'input_border_color' => '#e2e8f0',
                'input_text_color' => '#1e293b',
                'button_background' => '#0073e6',
                'button_text_color' => '#ffffff',
                'label_color' => '#374151',
                'link_color' => '#0073e6',
                'border_radius' => '8px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Search module - Search input with button, configurable scope
    tb_register_module('search', [
        'name' => 'Search',
        'icon' => 'search',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'placeholder' => 'Search...',
                'button_text' => 'Search',
                'show_button' => true,
                'button_icon_only' => false,
                'search_scope' => 'all', // all, pages, posts, products
                'results_page' => '/search',
            ],
            'design' => [
                'style' => 'default', // default, minimal, rounded, pill
                'layout' => 'inline', // inline, stacked
                'input_background' => '#ffffff',
                'input_border_color' => '#e2e8f0',
                'input_text_color' => '#1e293b',
                'input_icon_color' => '#94a3b8',
                'button_background' => '#0073e6',
                'button_text_color' => '#ffffff',
                'button_position' => 'right', // right, inside, below
                'height' => '48px',
                'border_radius' => '8px',
                'show_icon' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Portfolio module - Grid/masonry display of portfolio items with category filtering
    tb_register_module('portfolio', [
        'name' => 'Portfolio',
        'icon' => 'portfolio',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'items' => [
                    ['title' => 'Project One', 'category' => 'Web Design', 'image' => '', 'link' => '#', 'description' => 'Project description...'],
                    ['title' => 'Project Two', 'category' => 'Branding', 'image' => '', 'link' => '#', 'description' => 'Project description...'],
                    ['title' => 'Project Three', 'category' => 'Web Design', 'image' => '', 'link' => '#', 'description' => 'Project description...'],
                    ['title' => 'Project Four', 'category' => 'Photography', 'image' => '', 'link' => '#', 'description' => 'Project description...'],
                ],
                'show_filters' => true,
                'filter_all_text' => 'All',
            ],
            'design' => [
                'layout' => 'grid', // grid, masonry, carousel
                'columns' => 3,
                'columns_tablet' => 2,
                'columns_mobile' => 1,
                'gap' => '20px',
                'hover_effect' => 'fade', // fade, slide, zoom, none
                'show_title' => true,
                'show_category' => true,
                'show_description' => false,
                'overlay_color' => 'rgba(0, 0, 0, 0.7)',
                'title_color' => '#ffffff',
                'category_color' => '#94a3b8',
                'filter_style' => 'buttons', // buttons, dropdown, tabs
                'filter_active_color' => '#0073e6',
                'border_radius' => '8px',
                'aspect_ratio' => '4:3', // 1:1, 4:3, 16:9, 3:2, auto
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Video Slider module - Carousel/slider of videos (YouTube, Vimeo, self-hosted)
    tb_register_module('video_slider', [
        'name' => 'Video Slider',
        'icon' => 'video_slider',
        'category' => 'media',
        'defaults' => [
            'content' => [
                'videos' => [
                    ['title' => 'Video One', 'url' => '', 'thumbnail' => '', 'description' => ''],
                    ['title' => 'Video Two', 'url' => '', 'thumbnail' => '', 'description' => ''],
                ],
            ],
            'design' => [
                'layout' => 'slider', // slider, grid, list
                'columns' => 3, // for grid layout
                'show_thumbnails' => true,
                'thumbnail_position' => 'bottom', // bottom, left, right, none
                'show_title' => true,
                'show_description' => false,
                'autoplay_slider' => false,
                'slider_speed' => 5000,
                'show_arrows' => true,
                'show_dots' => true,
                'play_icon_color' => '#ffffff',
                'play_icon_size' => '64px',
                'overlay_color' => 'rgba(0,0,0,0.3)',
                'aspect_ratio' => '16:9', // 16:9, 4:3, 1:1
                'border_radius' => '8px',
                'gap' => '16px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Post Slider module - Dynamic slider pulling posts/articles from CMS database
    tb_register_module('post_slider', [
        'name' => 'Post Slider',
        'icon' => 'post_slider',
        'category' => 'content',
        'defaults' => [
            'content' => [
                'post_count' => 5,
                'category' => '',
                'order_by' => 'date',
                'order' => 'desc',
                'include_ids' => '',
                'exclude_ids' => '',
            ],
            'design' => [
                'show_image' => true,
                'show_title' => true,
                'show_meta' => true,
                'show_excerpt' => true,
                'excerpt_length' => 150,
                'show_read_more' => true,
                'read_more_text' => 'Read More',
                'min_height' => '500px',
                'background_overlay' => 'rgba(0,0,0,0.4)',
                'text_color' => '#ffffff',
                'title_size' => '36px',
                'content_width' => '800px',
                'text_alignment' => 'center',
                'autoplay' => true,
                'autoplay_speed' => 5000,
                'show_arrows' => true,
                'show_dots' => true,
                'parallax' => false,
                'use_bg_image' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Post Title module - Dynamic post/page title with meta information for theme builder templates
    tb_register_module('post_title', [
        'name' => 'Post Title',
        'icon' => 'post_title',
        'category' => 'dynamic',
        'defaults' => [
            'content' => [
                'show_title' => true,
                'show_meta' => true,
                'show_author' => true,
                'show_date' => true,
                'show_categories' => true,
                'show_comments_count' => true,
                'show_featured_image' => true,
                'featured_image_placement' => 'background',
                'date_format' => 'M d, Y',
            ],
            'design' => [
                'title_level' => 'h1',
                'title_size' => '42px',
                'title_color' => '#1e293b',
                'meta_color' => '#64748b',
                'meta_size' => '14px',
                'meta_separator' => '|',
                'text_alignment' => 'left',
                'background_overlay' => 'rgba(0,0,0,0.5)',
                'text_on_image_color' => '#ffffff',
                'min_height' => '400px',
                'content_width' => '100%',
                'padding_top' => '60px',
                'padding_bottom' => '60px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Post Content module - Dynamic post/page body content area for theme builder templates
    tb_register_module('post_content', [
        'name' => 'Post Content',
        'icon' => 'post_content',
        'category' => 'dynamic',
        'defaults' => [
            'content' => [],
            'design' => [
                'max_width' => '800px',
                'text_color' => '#1e293b',
                'font_size' => '18px',
                'line_height' => '1.8',
                'paragraph_spacing' => '1.5em',
                'heading_color' => '#0f172a',
                'link_color' => '#0073e6',
                'link_hover_color' => '#0056b3',
                'image_border_radius' => '8px',
                'blockquote_style' => 'border',
                'blockquote_border_color' => '#0073e6',
                'code_background' => '#f1f5f9',
                'code_text_color' => '#e11d48',
                'list_style' => 'disc',
                'dropcap' => false,
                'dropcap_color' => '#0073e6',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Posts Navigation module - Previous/Next post links for single post templates
    tb_register_module('posts_navigation', [
        'name' => 'Posts Navigation',
        'icon' => 'posts_navigation',
        'category' => 'dynamic',
        'defaults' => [
            'content' => [
                'prev_label' => 'Previous Post',
                'next_label' => 'Next Post',
                'show_title' => true,
                'show_thumbnail' => true,
                'same_category' => false,
                'show_arrows' => true,
            ],
            'design' => [
                'style' => 'default',
                'layout' => 'split',
                'thumbnail_size' => '80px',
                'thumbnail_radius' => '8px',
                'background_color' => '#f8fafc',
                'hover_background' => '#f1f5f9',
                'label_color' => '#64748b',
                'label_size' => '12px',
                'title_color' => '#1e293b',
                'title_size' => '16px',
                'title_hover_color' => '#0073e6',
                'arrow_color' => '#94a3b8',
                'border_color' => '#e2e8f0',
                'padding' => '20px',
                'gap' => '24px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Comments module - Display and submit comments for posts/pages
    tb_register_module('comments', [
        'name' => 'Comments',
        'icon' => 'comments',
        'category' => 'dynamic',
        'defaults' => [
            'content' => [
                'title' => 'Comments',
                'show_title' => true,
                'show_count_in_title' => true,
                'show_avatars' => true,
                'avatar_size' => '48px',
                'show_reply_button' => true,
                'show_date' => true,
                'date_format' => 'M d, Y',
                'form_title' => 'Leave a Comment',
                'show_form' => true,
                'require_name_email' => true,
                'submit_text' => 'Post Comment',
            ],
            'design' => [
                'style' => 'default',
                'background_color' => '#ffffff',
                'comment_background' => '#f8fafc',
                'comment_border_color' => '#e2e8f0',
                'author_color' => '#1e293b',
                'author_size' => '16px',
                'date_color' => '#64748b',
                'date_size' => '12px',
                'text_color' => '#374151',
                'text_size' => '14px',
                'reply_indent' => '40px',
                'avatar_radius' => '50%',
                'form_background' => '#f8fafc',
                'input_background' => '#ffffff',
                'input_border_color' => '#e2e8f0',
                'button_background' => '#0073e6',
                'button_text_color' => '#ffffff',
                'gap' => '20px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);


    // Signup module - Newsletter subscription form
    tb_register_module('signup', [
        'name' => 'Signup Form',
        'icon' => 'signup',
        'category' => 'forms',
        'defaults' => [
            'content' => [
                'title' => 'Subscribe to Newsletter',
                'description' => 'Get the latest updates delivered to your inbox.',
                'email_placeholder' => 'Enter your email',
                'button_text' => 'Subscribe',
                'success_message' => 'Thank you for subscribing!',
                'provider' => 'none',
                'custom_action_url' => '',
                'show_name_field' => false,
                'name_placeholder' => 'Your name',
            ],
            'design' => [
                'style' => 'inline',
                'background_color' => '#f8fafc',
                'input_background' => '#ffffff',
                'input_border_color' => '#e2e8f0',
                'input_text_color' => '#1e293b',
                'button_background' => '#0073e6',
                'button_text_color' => '#ffffff',
                'title_color' => '#1e293b',
                'description_color' => '#64748b',
                'border_radius' => '8px',
                'padding' => '40px',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Code module - Full width code block
    tb_register_module('fullwidth_code', [
        'name' => 'Fullwidth Code',
        'icon' => 'fullwidth_code',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'code' => '',
                'language' => 'javascript',
            ],
            'design' => [
                'theme' => 'dark',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Image module
    tb_register_module('fullwidth_image', [
        'name' => 'Fullwidth Image',
        'icon' => 'fullwidth_image',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'src' => '',
                'alt' => '',
                'title' => '',
                'link' => '',
            ],
            'design' => [
                'height' => '400px',
                'object_fit' => 'cover',
                'overlay_color' => '',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Map module
    tb_register_module('fullwidth_map', [
        'name' => 'Fullwidth Map',
        'icon' => 'fullwidth_map',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'address' => '',
                'lat' => 0,
                'lng' => 0,
                'zoom' => 14,
            ],
            'design' => [
                'height' => '400px',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Menu module
    tb_register_module('fullwidth_menu', [
        'name' => 'Fullwidth Menu',
        'icon' => 'fullwidth_menu',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'menu_source' => 'custom',
                'cms_menu_id' => null,
                'items' => [
                    ['label' => 'Home', 'url' => '/'],
                    ['label' => 'About', 'url' => '/about'],
                    ['label' => 'Contact', 'url' => '/contact'],
                ],
                'logo' => '',
            ],
            'design' => [
                'background_color' => '#1e1e2e',
                'text_color' => '#ffffff',
                'hover_color' => '#0073e6',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Slider module
    tb_register_module('fullwidth_slider', [
        'name' => 'Fullwidth Slider',
        'icon' => 'fullwidth_slider',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'slides' => [
                    ['title' => 'Slide 1', 'text' => 'Description', 'image' => '', 'button_text' => 'Learn More', 'button_url' => '#'],
                ],
            ],
            'design' => [
                'min_height' => '600px',
                'autoplay' => true,
                'autoplay_speed' => 5000,
                'show_arrows' => true,
                'show_dots' => true,
                'overlay_color' => 'rgba(0,0,0,0.4)',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);
    // Fullwidth Header module - Full width hero header
    tb_register_module('fullwidth_header', [
        'name' => 'Fullwidth Header',
        'icon' => 'fullwidth_header',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'title' => 'Welcome to Our Site',
                'subtitle' => 'Discover amazing things',
                'button_text' => 'Get Started',
                'button_url' => '#',
                'background_image' => '',
            ],
            'design' => [
                'min_height' => '500px',
                'text_align' => 'center',
                'overlay_color' => 'rgba(0,0,0,0.5)',
                'title_color' => '#ffffff',
                'subtitle_color' => '#e2e8f0',
                'button_background' => '#0073e6',
                'button_text_color' => '#ffffff',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Portfolio module
    tb_register_module('fullwidth_portfolio', [
        'name' => 'Fullwidth Portfolio',
        'icon' => 'fullwidth_portfolio',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'source' => 'manual',
                'category_id' => null,
                'items' => [
                    ['title' => 'Project 1', 'image' => '', 'category' => 'Web', 'link' => '#'],
                    ['title' => 'Project 2', 'image' => '', 'category' => 'Design', 'link' => '#'],
                    ['title' => 'Project 3', 'image' => '', 'category' => 'Web', 'link' => '#'],
                ],
                'show_filter' => true,
            ],
            'design' => [
                'columns' => 3,
                'gap' => '0',
                'hover_effect' => 'overlay',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Fullwidth Post Slider module
    tb_register_module('fullwidth_post_slider', [
        'name' => 'Fullwidth Post Slider',
        'icon' => 'fullwidth_post_slider',
        'category' => 'fullwidth',
        'defaults' => [
            'content' => [
                'source' => 'latest',
                'category_id' => null,
                'posts_count' => 5,
                'show_excerpt' => true,
                'show_date' => true,
                'show_author' => true,
                'show_read_more' => true,
                'read_more_text' => 'Read More',
            ],
            'design' => [
                'min_height' => '500px',
                'autoplay' => true,
                'autoplay_speed' => 5000,
                'show_arrows' => true,
                'show_dots' => true,
                'overlay_color' => 'rgba(0,0,0,0.5)',
                'fullwidth' => true,
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Social Media Follow module - Social network icons with links
    tb_register_module('social', [
        'name' => 'Social Follow',
        'icon' => 'social',
        'category' => 'social',
        'defaults' => [
            'content' => [
                'networks' => [
                    ['network' => 'facebook', 'url' => '#', 'enabled' => true],
                    ['network' => 'twitter', 'url' => '#', 'enabled' => true],
                    ['network' => 'instagram', 'url' => '#', 'enabled' => true],
                ],
                'url_new_window' => true,
                'show_follow_button' => false,
            ],
            'design' => [
                'icon_size' => '24px',
                'icon_color' => '', // empty = use brand colors
                'icon_shape' => 'circle', // circle, rounded, square
                'gap' => '12px',
                'alignment' => 'left', // left, center, right
                'background_style' => 'filled', // filled, outline, none
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
            ],
        ],
    ]);

    // Logo module - for Header templates
    tb_register_module('logo', [
        'name' => 'Logo',
        'icon' => 'logo',
        'category' => 'layout',
        'defaults' => [
            'content' => [
                'image' => '',
                'image_alt' => '',
                'link_url' => '/',
                'link_target' => '_self',
                'max_height' => '60px',
                'mobile_max_height' => '40px',
            ],
            'design' => [
                'alignment' => 'left',
                'padding' => '10px',
                'filter' => 'none',
                'hover_opacity' => '0.8',
            ],
            'advanced' => [
                'css_class' => '',
                'css_id' => '',
                'aria_label' => 'Site Logo',
            ],
        ],
    ]);
}
